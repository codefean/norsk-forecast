{"ast":null,"code":"// src/api/frostApi.js\nimport { frostToGeoJSON } from \"../utils/transform\";\n\n// Fetch list of weather stations\nexport async function fetchStations() {\n  const clientId = process.env.REACT_APP_FROST_CLIENT_ID;\n  const res = await fetch(\"https://frost.met.no/sources/v0.jsonld?types=SensorSystem&country=NO\", {\n    headers: {\n      Authorization: \"Basic \" + btoa(clientId + \":\"),\n      Accept: \"application/json\"\n    }\n  });\n  if (!res.ok) throw new Error(\"Failed to fetch stations\");\n  return await res.json();\n}\n\n// Fetch latest observations for given stations\nexport async function fetchObservations(stationIds) {\n  const clientId = process.env.REACT_APP_FROST_CLIENT_ID;\n  const sources = stationIds.join(\",\");\n  const url = \"https://frost.met.no/observations/v0.jsonld\" + `?sources=${sources}` + \"&elements=snow_depth,precipitation_type,wind_speed\" + \"&referencetime=latest\";\n  const res = await fetch(url, {\n    headers: {\n      Authorization: \"Basic \" + btoa(clientId + \":\"),\n      Accept: \"application/json\"\n    }\n  });\n  if (!res.ok) throw new Error(\"Failed to fetch observations\");\n  const frostData = await res.json();\n  return frostToGeoJSON(frostData); // transform into GeoJSON here\n}","map":{"version":3,"names":["frostToGeoJSON","fetchStations","clientId","process","env","REACT_APP_FROST_CLIENT_ID","res","fetch","headers","Authorization","btoa","Accept","ok","Error","json","fetchObservations","stationIds","sources","join","url","frostData"],"sources":["/Users/seanfagan/Desktop/climate-globe/src/api/frostApi.js"],"sourcesContent":["// src/api/frostApi.js\nimport { frostToGeoJSON } from \"../utils/transform\";\n\n// Fetch list of weather stations\nexport async function fetchStations() {\n  const clientId = process.env.REACT_APP_FROST_CLIENT_ID;\n\n  const res = await fetch(\n    \"https://frost.met.no/sources/v0.jsonld?types=SensorSystem&country=NO\",\n    {\n      headers: {\n        Authorization: \"Basic \" + btoa(clientId + \":\"),\n        Accept: \"application/json\",\n      },\n    }\n  );\n\n  if (!res.ok) throw new Error(\"Failed to fetch stations\");\n  return await res.json();\n}\n\n// Fetch latest observations for given stations\nexport async function fetchObservations(stationIds) {\n  const clientId = process.env.REACT_APP_FROST_CLIENT_ID;\n  const sources = stationIds.join(\",\");\n\n  const url =\n    \"https://frost.met.no/observations/v0.jsonld\" +\n    `?sources=${sources}` +\n    \"&elements=snow_depth,precipitation_type,wind_speed\" +\n    \"&referencetime=latest\";\n\n  const res = await fetch(url, {\n    headers: {\n      Authorization: \"Basic \" + btoa(clientId + \":\"),\n      Accept: \"application/json\",\n    },\n  });\n\n  if (!res.ok) throw new Error(\"Failed to fetch observations\");\n\n  const frostData = await res.json();\n  return frostToGeoJSON(frostData); // transform into GeoJSON here\n}\n"],"mappings":"AAAA;AACA,SAASA,cAAc,QAAQ,oBAAoB;;AAEnD;AACA,OAAO,eAAeC,aAAaA,CAAA,EAAG;EACpC,MAAMC,QAAQ,GAAGC,OAAO,CAACC,GAAG,CAACC,yBAAyB;EAEtD,MAAMC,GAAG,GAAG,MAAMC,KAAK,CACrB,sEAAsE,EACtE;IACEC,OAAO,EAAE;MACPC,aAAa,EAAE,QAAQ,GAAGC,IAAI,CAACR,QAAQ,GAAG,GAAG,CAAC;MAC9CS,MAAM,EAAE;IACV;EACF,CACF,CAAC;EAED,IAAI,CAACL,GAAG,CAACM,EAAE,EAAE,MAAM,IAAIC,KAAK,CAAC,0BAA0B,CAAC;EACxD,OAAO,MAAMP,GAAG,CAACQ,IAAI,CAAC,CAAC;AACzB;;AAEA;AACA,OAAO,eAAeC,iBAAiBA,CAACC,UAAU,EAAE;EAClD,MAAMd,QAAQ,GAAGC,OAAO,CAACC,GAAG,CAACC,yBAAyB;EACtD,MAAMY,OAAO,GAAGD,UAAU,CAACE,IAAI,CAAC,GAAG,CAAC;EAEpC,MAAMC,GAAG,GACP,6CAA6C,GAC7C,YAAYF,OAAO,EAAE,GACrB,oDAAoD,GACpD,uBAAuB;EAEzB,MAAMX,GAAG,GAAG,MAAMC,KAAK,CAACY,GAAG,EAAE;IAC3BX,OAAO,EAAE;MACPC,aAAa,EAAE,QAAQ,GAAGC,IAAI,CAACR,QAAQ,GAAG,GAAG,CAAC;MAC9CS,MAAM,EAAE;IACV;EACF,CAAC,CAAC;EAEF,IAAI,CAACL,GAAG,CAACM,EAAE,EAAE,MAAM,IAAIC,KAAK,CAAC,8BAA8B,CAAC;EAE5D,MAAMO,SAAS,GAAG,MAAMd,GAAG,CAACQ,IAAI,CAAC,CAAC;EAClC,OAAOd,cAAc,CAACoB,SAAS,CAAC,CAAC,CAAC;AACpC","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}